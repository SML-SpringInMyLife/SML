<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.sml.mapper.CommunityMapper">
  
  	<insert id="communityEnroll">
  		INSERT INTO COMMUNITY(COMM_TITLE, COMM_CONTENT, COMM_WRITER) VALUES(
  			#{commTitle},
  			#{commContent},
  			#{commWriter.memCode}
  		)
  	</insert>
  	
  	<select id="getBoardList" resultType="com.sml.model.CommunityVO">
  		SELECT 
        	c.COMM_CODE as commCode, 
        	c.COMM_TITLE as commTitle,     
        	c.COMM_ENROLL_DATE as enrollDate, 
        	c.COMM_COUNT as commCount,  
        	m.MEM_NAME as commWriter
    	FROM COMMUNITY c
    	JOIN TB_MEMBER m 
    		ON c.COMM_WRITER = m.MEM_CODE
    	WHERE c.COMM_STATUS = 'N'
  	</select>
  	
  	<select id="communityDetail" resultType="com.sml.model.CommunityVO">
  		SELECT 
  			c.COMM_CODE AS commCode,
  			c.COMM_TITLE AS commTitle,
  			m.MEM_NAME as commWriter,
  			c.COMM_CONTENT AS commContent,
  			c.COMM_ENROLL_DATE AS enrollDate,
  			c.COMM_MODIFY_DATE AS modifyDate
  		 FROM COMMUNITY c
  		 JOIN TB_MEMBER m
  		 	ON c.COMM_WRITER = m.MEM_CODE
  		 WHERE COMM_CODE = #{commCode}
  	</select>
  	
  	<update id="modify">
  	</update>
  	
  	<update id="delete">
  	</update>
  	
  </mapper>
